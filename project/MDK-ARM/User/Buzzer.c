/*
 * @Author: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
 * @Date: 2025-03-25 19:03:25
 * @LastEditors: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
 * @LastEditTime: 2025-04-16 23:40:23
 * @FilePath: \MDK-ARM\User\Buzzer.c
 * @Description: 
 * 
 * Copyright (c) 2025 by ${git_name_email}, All Rights Reserved. 
 */
#include "Buzzer.h"
#include "tim.h"



// const float pitch_name_frequency[21] = {
// 	//低音
// 	//1		2		3		4		5		6		7
// 	261.63,	293.67,	329.63,	349.23,	391.99,	440,	493.88,//0-6
// 	//中音
// 	//1		2		3		4		5		6		7
// 	532.25,	587.33,	659.25,	698.46,	783.99,	880,	987.76,//7-13
// 	//高音
// 	//1		2		3		4		5		6		7
// 	1046.50,1174.66,1318.51,1396.92,1567.98,1760,	1975.52//14-20
// };

// const uint8_t gu_yong_zhe[] = {
// 	9,21,21,7,8,7,9,21,7,8,7,8,9,5,7,5,7,5,7,8,7,
// 	6,21,21,9,21,21,7,8,7,9,21,7,8,7,8,9,5,7,5,7,5,7,9,8,6,21,21,
// 	5,7,12,12,12,12,11,12,12,11,12,11,12,11,9,9,9,21,21,5,7,12,12,12,11,12,11,13,13,13,12,13,    
// 	13,12,9,9,21,9,11,9,8,9,8,9,8,9,11,9,11,9,8,9,8,9,8,21,7,8,
// 	9,5,7,9,8,9,8,7,7,5,21,21,12,13,14,15,13,14,14,14,13,14,15,13,14,14,14,15,
// 	16,15,16,15,16,16,15,16,18,16,12,13,14,15,13,14,14,14,13,14,15,13,14,14,14,15,
// 	16,15,16,15,16,16,15,16,18,16,18,16,18,16,18,16,18,19,16,18,18,16,18,16,18,16,18,19,16,18,18,18,
// 	16,15,15,15,14,16,16,15,15,15,14,14,12,21,21,18,18,16,15,15,15,14,16,16,15,15,15,14,14,12,21,21,
// 	21,21,21,21,21,21,21,21,21,21,21,21,12,11,12,11,12,11,12,11,12,12,11,12,11,12,11,
// 	9,9,9,21,21,12,11,12,11,12,11,12,11,13,13,13,12,13,12,9,9,9,21,21,9,11,9,
// 	8,9,8,9,8,9,11,9,11,9,8,9,8,9,8,21,7,8,9,12,14,16,15,16,15,14,14,12,21,12,13,
// 	12,5,7,9,13,13,13,13,12,12,12,21,5,7,9,13,13,13,13,12,12,12,21,12,13,12,21,21
// };
// const uint8_t beat[] = {
// 	8,4,1,1,1,1,8,3,1,1,1,1,1,3,1,3,1,3,1,2,2,
// 	8,4,4,8,4,1,1,1,1,8,3,1,1,1,1,1,3,1,3,1,3,1,2,2,8,4,4,
// 	1,1,2,1,1,1,1,2,1,1,1,1,1,1,1,3,4,4,2,1,1,3,1,1,1,1,1,3,1,1,1,2,
// 	1,2,1,8,1,1,1,1,3,1,3,1,3,1,1,1,1,1,3,1,3,1,4,2,1,1,
// 	2,2,2,2,3,1,1,1,2,8,4,2,1,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,
// 	1,1,1,1,2,1,1,2,2,2,1,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,
// 	1,1,1,1,2,1,1,2,2,2,2,3,1,3,1,1,1,1,1,2,2,3,1,3,1,1,1,1,1,2,1,1,
// 	1,1,2,2,1,1,1,1,2,2,1,1,8,4,2,1,1,1,1,2,2,1,1,1,1,2,2,1,1,8,4,4,
// 	4,4,4,4,4,4,4,4,4,4,4,4,2,1,1,3,1,1,1,1,1,2,1,1,1,1,1,1,
// 	1,3,4,4,2,1,1,3,1,1,1,1,1,3,1,1,1,1,1,1,3,4,4,1,1,1,1,
// 	3,1,3,1,3,1,1,1,1,1,3,1,3,1,4,2,1,1,2,2,2,2,3,1,1,1,2,12,2,1,1,
// 	2,2,2,2,4,2,1,1,1,3,12,2,2,2,2,4,2,1,1,1,3,8,2,1,1,8,4,4
// };

// void play_music(void)
// {
// 	uint32_t i, delay_time, tune;
// 	for(i=0;i<(sizeof(gu_yong_zhe)/sizeof(gu_yong_zhe[0]));i++)
// 	{
// 		delay_time = beat[i] * 250; //250ms 1/4拍， 1s 1拍
// 		if(gu_yong_zhe[i] != 21) // 不是休止符
// 		{
// 			tune = (uint32_t)72*1000*1000/pitch_name_frequency[gu_yong_zhe[i]];
// //			__HAL_TIM_SetAutoreload(&htim2, tune); // 和下一句作用一样
// 			TIM2->ARR = tune; // 改变频率
// //			__HAL_TIM_SetCompare(&htim2, TIM_CHANNEL_1, tune/2); // 和下一句作用一样
// 			TIM2->CCR2 = tune/2; // 占空比为50%
// 			HAL_TIM_PWM_Start(&htim2, TIM_CHANNEL_2);
// 			HAL_Delay(delay_time); // 根据节拍延时
// 			HAL_TIM_PWM_Stop(&htim2, TIM_CHANNEL_2);
// 			__HAL_TIM_SetCounter(&htim2, 0); // CNT寄存器值清0，不然会发生错误
// 		}
// 		else // 是休止符
// 		{
// 			HAL_TIM_PWM_Stop(&htim2, TIM_CHANNEL_2);
// 			HAL_Delay(delay_time);
// 		}
// 	}
// }











